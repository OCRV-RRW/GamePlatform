{{template "base" .}}
{{define "title"}}ИГРА {{.Game.Title}}{{end}}

{{define "navigation"}}
<a href="/">ГЛАВНАЯ</a>
{{end}}

{{define "main"}}
{{with .Game}}
<div class="gamepage">
    <div class="metadata">
        <strong>{{.Title}}</strong>
    </div>
    <!-- <div class="preview-container">
        <img src="{{.Icon}}" alt="Превью игры {{.Title}}">
    </div> -->
    <div class="preview-container" style="flex-direction: column;">
        <div style="position: relative; width: 100%; height: 100%;">
            {{range .Preview}}
                <div class="preview_item">
                {{if .Video}}
                    <video src="{{.Video}}" style="width: 100%; height: 100%;" muted="muted" autoplay="autoplay" controls controlsList="nodownload"></video>
                {{else}}
                    <img src="{{.Image}}" style="width: 100%; height: 100%; object-fit: contain;">
                {{end}}
                </div>
            {{end}}
        </div>
    </div>
    <!-- Main Winow -->

    <div style="position: relative; width: 100%; height: 123px; overflow-x: auto; scroll-behavior: smooth; overflow-y: hidden;">
        <div style="position: absolute; left: 0px; display: flex; flex-direction: row; padding-left: 18px; padding-right: 18px;">
            {{range .Preview}}
                <div class="strip_item">
                    <img src="{{.Image}}" style="width: 100%; height: 100%; object-fit: contain;">
                    {{if .Video}}
                        <div class="videoImage"></div>
                    {{end}}
                </div>
            {{end}}
        </div>
    </div>
    <pre>{{.Description}}</pre>
    <div class="metadata">
        <a class="play-button" href="/play/{{.ID}}">ИГРАТЬ</a>
    </div>
</div>
<div class="screenshotModalWindow" style="display: none;">
    <div class="screenshotModalContent">
        <div class="screenshotModalHeader">
            <div class="closeModalButton"></div>
        </div>
        <div class="screenshotModalImgContainer">
            <img style="max-width: 100%; max-height: 60vh; position: relative; object-fit: contain;">
        </div>
        <div class="screenshotModalFooter ">
            <div id="countScreenshots"></div>
            <div class="screenshotModalButtonChangeScreen previous">
                Назад
            </div>
            <div class="screenshotModalButtonChangeScreen next">
                Дальше
            </div>
        </div>
    </div>
</div>
<script src="../static/js/preview.js", type="module" defer></script>
<script src="../static/js/screenshotModal.js", type="module" defer></script>
<script src="../static/js/strip.js", type="module" defer></script>
{{end}}
{{end}}
